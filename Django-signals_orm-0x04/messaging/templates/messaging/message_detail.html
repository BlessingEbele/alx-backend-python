<!DOCTYPE html>
<html>
<head>
    <title>Message Details</title>
</head>
<body>
    <h2>Message Details</h2>

    <p><strong>Sender:</strong> {{ message.sender }}</p>
    <p><strong>Receiver:</strong> {{ message.receiver }}</p>
    <p><strong>Content:</strong> {{ message.content }}</p>
    <p><strong>Timestamp:</strong> {{ message.timestamp }}</p>
    <p><strong>Edited:</strong> {{ message.edited }}</p>

    {% if history %}
        <h3>Edit History</h3>
        <ul>
            {% for edit in history %}
                <li>
                    <strong>Edited At:</strong> {{ edit.edited_at }}<br>
                    <strong>Old Content:</strong> {{ edit.old_content }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No edit history.</p>
    {% endif %}
</body>
</html>

<form action="{% url 'delete_account' %}" method="post">
    {% csrf_token %}
    <button type="submit" class="btn btn-danger">Delete My Account</button>
</form>

<!-- templates/messaging/conversation_detail.html -->

<h2>Conversation {{ conversation.id }}</h2>

{% for message in messages %}
  <div style="margin-bottom: 10px;">
    <strong>{{ message.sender.username }}</strong>: {{ message.content }} <br>
    <small>{{ message.timestamp }}</small>

    {% if message.replies.all %}
      <div style="margin-left: 30px;">
        {% for reply in message.replies.all %}
          <strong>{{ reply.sender.username }}</strong>: {{ reply.content }} <br>
          <small>{{ reply.timestamp }}</small>
        {% endfor %}
      </div>
    {% endif %}
  </div>
{% endfor %}
